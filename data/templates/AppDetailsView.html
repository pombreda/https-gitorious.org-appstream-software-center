<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" $text_direction>
<head>
 <meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
 <title></title>

 <script type="text/javascript">
  function changeTitle(title) { 
    document.title = title; 
  }
  function fadeIn(objId,opacity) {
    if (document.getElementById) {
      obj = document.getElementById(objId);
      if (opacity <= 100) {
        setOpacity(obj, opacity);
        opacity += 10;
        window.setTimeout("fadeIn('"+objId+"',"+opacity+")", 100);
      }
    }
  }
            
  function thumbMissing() {
    obj=document.getElementById("screenshot_thumbnail_img"); 
    obj.style.background= 'url("file:$screenshot_thumbnail_missing")';
    obj.style.visibility = 'visible';
  }
  function setOpacity(obj, opacity) {
    opacity = (opacity == 100)?99.999:opacity;
    obj.style.opacity = opacity/100;
  }
  function initElement(id) {
    element = document.getElementById(id);
    setOpacity(element, 0);
    element.style.visibility = 'visible';
    fadeIn(id,0);
  }
  function action_button_clicked() {
    document.getElementById("button_$action_button_value").disabled = true;
    changeTitle("call:on_button_${action_button_value}_clicked");
  }
  function enable_action_button() {
    document.getElementById("button_$action_button_value").disabled = false;
  }
  function disable_action_button() {
    document.getElementById("button_$action_button_value").disabled = true;
  }
  function on_report_abuse_clicked(review_id) {
    changeTitle("call:on_report_abuse_clicked");
  }
  function on_write_new_review_clicked(appname, pkgname) {
    changeTitle("call:on_write_new_review_clicked");
  }
  function addReview(review_text, review_id, review_date, review_rating, review_person) {
    parent = document.getElementById("reviews");
    elm = document.createElement("p");
    elm.setAttribute("class", "review");
    elm.innerHTML = review_text;
    parent.appendChild(elm);
    a = document.createElement("a");
    a.setAttribute("href", "#");
    a.setAttribute("class", "report_abuse_link");
    a.appendChild(document.createTextNode("$report_abuse_label"));
    a.setAttribute("OnClick", "on_report_abuse_clicked("+review_id+");return false;");
    parent.appendChild(a);
  }
  window.onload = function() {
    initElement('screenshot_thumbnail_img');
    initElement('$screenshot_installed')
  }
 </script>

  <style type="text/css">
    body {
      margin: 0; 
      padding: 1em 12px;
      font-family:${font_family};
      font-size:${font_size};
      font-weight:${font_weight};
      font-style:${font_style};
    }
    body.section-get {
      background-color:#b6bdc4; 
      color: #000;
    }
    h1 {
      font-size:140%; 
      margin: 0 0 1em;
    }
    #description {
      font-size: 80%;
    }
    #icon {
      width:64px;
      height:64px;
      z-index:-1;
      background: url('file:$iconpath') top center no-repeat;
      position:absolute;
      -webkit-background-clip: border-box;
      -webkit-background-origin: border-box;
      -webkit-background-size: ${icon_width}px ${icon_height}px;
    }
    .screenshot_thumbnail {
      width:160px; 
      height:120px;
      -khtml-user-drag:none;
    }
    #screenshot_thumbnail_loading {
    background: url('file:$iconpath_loading') 50% 50% no-repeat;
      float:right;
      margin: 0 0 1em 1em;
    }
    #screenshot_thumbnail {
      visibility:hidden; 
      background-color:#b6bdc4;
    }
    #screenshot_thumbnail-installed {
      visibility:hidden; 
      background-color:#fff; 
    }
    #screenshot_thumbnail_img {
      visibility:hidden; 
      background:url('${screenshot_thumbnail_url}') no-repeat;
      cursor: -webkit-zoom-in
    }
    #text {
      float:left; 
      padding-left:86px;
    }
    #installed_overlay { 
      z-index:999; 
      width:24px;
      height:24px;
      background: 
      url('file:${software_installed_icon}'); 
      position:absolute; 
      left:40px; 
      top:40px; 
      visibility:${installed} 
    }
    #package_information { 
      font-size:70%; 
    }
    #maintainance_time { 
      font-size:70%; 
    }
    #license { 
      font-size:70%; 
    }
    #price { 
      font-size:70%; 
    }
    #button_homepage { 
      visibility:${homepage_button_visibility}; 
    }
    #action_button_description { 
      font-size:70%; 
    }
    .action_button { 
      visibility:${action_button_visible}; 
    }
    .add_review_link {
      font-size:80%; 
      text-align:right;
    }
    .report_abuse_link {
      font-size:80%; 
      text-align:right;
    }
 </style>

 </head>

<body class="${body_class}">

    <div id="icon">
      <div id="installed_overlay"></div>
    </div>
 
 <div id="text">
   <h1>$appname</h1>
   <div id='screenshot_thumbnail_loading' class='screenshot_thumbnail'>
        <div id='$screenshot_installed' class='screenshot_thumbnail'>
            <a href="#" onclick='changeTitle("call:on_screenshot_thumbnail_clicked")' class="screenshot_a">
            <img id="screenshot_thumbnail_img" class="screenshot_thumbnail" 
		 alt="${screenshot_alt}"/>
            </a>
        </div>
   </div>
   <div id="description">$description</div>
   <p id="license">$license</p>
   <p id="price">$price</p>
   <p id="action_button_description">$action_button_description</p>
   <input type="button" id="button_${action_button_value}" 
          class="action_button"
          value="$action_button_label"
	  onclick='action_button_clicked()'
	  />
   
   <input type="button" id="button_homepage" value="$homepage"
	  onclick='changeTitle("call:on_button_homepage_clicked")'
	  />
   <p id="package_information">$package_information</p>
   <p id="maintainance_time">$maintainance_time</p>

   <p>
     <h2>Reviews</h2>
     <a class="add_review_link"
	href="#" 
	OnClick="javascript:on_write_new_review_clicked();return false;">
       $new_review_label_text
     </a>
     <p id="reviews">
       <!-- reviews go here via addReview() -->
     </p>
   </p>


</body>
</html>
